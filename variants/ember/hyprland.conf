# Clawmarchy: AMOLED dark theme with muted blue-violet accents
# Static override -- bypasses template generation
# Update: Manual -- accent changes affect border color; palette changes affect shadow color

# ----------------------------------------------------------
# Border Colors (FX-02)
# Muted blue-violet borders matching accent from colors.toml
# ----------------------------------------------------------
$activeBorderColor = rgb(D4895A)  # colors.toml: accent (rgb format without #)

general {
    col.active_border = $activeBorderColor
}

group {
    col.border_active = $activeBorderColor
}

# ----------------------------------------------------------
# Window Opacity Rules (FNDTN-01)
# Override Omarchy's default 0.97/0.9 opacity multiplier from
# windows.conf for true AMOLED black. The 'override' keyword
# sets ABSOLUTE opacity instead of multiplying with the base
# config: without it, 1.0 * 0.97 = 0.97 (gray wash).
# ----------------------------------------------------------
windowrule = opacity 1.0 override 1.0 override, match:class .*

# ----------------------------------------------------------
# Transparency Exceptions
# Apps that FUNCTIONALLY require transparency to work correctly
# (not aesthetic preference). The 'unset' keyword removes the
# catch-all opacity for matching windows, reverting to default.
#
# Find app class names with:  hyprctl clients | grep class
#
# To add an exception, copy the pattern below and uncomment:
#   windowrule = opacity unset, match:class ^(app-class)$
# ----------------------------------------------------------
# windowrule = opacity unset, match:class ^(hyprpicker)$   # color picker (samples through overlay)
# windowrule = opacity unset, match:class ^(slurp)$        # screen region selector

# ----------------------------------------------------------
# Layer Surface Rules (FNDTN-02)
# Layer surfaces (status bar, notifications, popups, launcher)
# use layerrule, not windowrule. Hyprland does NOT support
# setting opacity via layerrule -- layer surface backgrounds
# are controlled by each app's own config (Phase 2).
# These rules disable compositor effects (blur) to prevent
# background bleed-through on AMOLED black surfaces.
# Verify namespaces with: hyprctl layers
# ----------------------------------------------------------
layerrule = blur off, match:namespace waybar     # status bar
layerrule = blur off, match:namespace mako       # notification daemon
layerrule = blur off, match:namespace swayosd    # volume/brightness OSD popups (verify with hyprctl layers)
layerrule = blur off, match:namespace walker     # app launcher (verify with hyprctl layers)

# ----------------------------------------------------------
# Visual Effects (FX-02)
# Subtle blur and smooth animations for AMOLED dark aesthetic
# ----------------------------------------------------------
decoration {
    blur {
        enabled = true
        size = 6
        passes = 2
        noise = 0.02
        contrast = 1.0
        brightness = 0.8
        new_optimizations = true
    }

    shadow {
        enabled = true
        range = 12
        render_power = 3
        color = rgba(00000088)  # colors.toml: background (shadow, 53% alpha)
    }
}

animations {
    enabled = true
    bezier = smoothOut, 0.36, 0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1, 0.5, 1
    bezier = overshot, 0.4, 0.8, 0.2, 1.2

    animation = windows, 1, 4, overshot, slide
    animation = windowsOut, 1, 4, smoothOut, slide
    animation = fade, 1, 4, smoothIn
    animation = workspaces, 1, 5, overshot, slidevert
}
