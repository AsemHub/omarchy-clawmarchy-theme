---
phase: 03-color-system-traceability
plan: 02
type: execute
wave: 2
depends_on:
  - 03-01
files_modified:
  - COLORS.md
autonomous: true
requirements:
  - CLR-03

must_haves:
  truths:
    - "A maintainer can look up COLORS.md to know exactly which files to update when changing the accent color"
    - "Every static override file is listed with its classification and maintenance impact"
    - "All 24 colors.toml palette keys are documented with their hex values and usage locations"
    - "All unmapped color values are listed with rationale for why they are not in colors.toml"
  artifacts:
    - path: "COLORS.md"
      provides: "Color traceability reference document"
      contains: "Quick Reference"
  key_links:
    - from: "COLORS.md"
      to: "colors.toml"
      via: "palette key reference table"
      pattern: "colors\\.toml"
    - from: "COLORS.md"
      to: "btop.theme"
      via: "per-file audit section"
      pattern: "btop\\.theme"
---

<objective>
Create the COLORS.md reference document at the repo root, providing a practical guide for maintainers who need to update color values when changing the accent color or palette.

Purpose: Consolidate the inline annotation audit into a single-page reference that answers "what do I need to update when changing the accent color?" prominently, followed by detailed per-file color mappings for contributors and future auditors.

Output: COLORS.md at repo root with five sections: quick reference, file classification, palette reference, per-file audit, and unmapped values summary.
</objective>

<execution_context>
@/home/asem/.claude/get-shit-done/workflows/execute-plan.md
@/home/asem/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-color-system-traceability/03-RESEARCH.md
@.planning/phases/03-color-system-traceability/03-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create COLORS.md reference document</name>
  <files>COLORS.md</files>
  <action>
Create `COLORS.md` at the repo root with the following five-section structure. This document serves two audiences: maintainers who need the quick reference (sections 1-2) and auditors/contributors who need detailed mappings (sections 3-5).

**Section 1: Quick Reference -- What to Update When Changing Accent Color**

This is the PRIMARY section. Create a table listing every file, whether accent changes affect it, how many values to update, and what to search for. Use the data from 03-RESEARCH.md "Maintenance impact per file" table:

```markdown
## Quick Reference: What to Update When Changing Accent Color

When changing the accent color from `#7B6CBD` to a new value, update these files:

| File | Affected? | Values to Update | Search For |
|------|-----------|-----------------|------------|
| colors.toml | YES | `accent`, `selection_background` | `#7B6CBD` |
| waybar.css | YES | 2 accent values | `#7B6CBD` |
| walker.css | YES | 2 @define-color accent values | `#7B6CBD` |
| swayosd.css | YES | 1 @define-color accent value | `#7B6CBD` |
| mako.ini | YES | 1 border-color | `#7B6CBD` |
| hyprland.conf | YES | 1 rgb() border color | `7B6CBD` (no # prefix) |
| hyprlock.conf | YES | 3 rgba() values (outer_color, check_color, clock) | `123,108,189` (decimal) |
| btop.theme | YES | 7 accent-role values | `#7B6CBD` |
| vscode.json | YES | 5 values (3 pure accent + 2 alpha-derived) | `#7B6CBD` |
| neovim.lua | NO | Background overrides only | -- |
| chromium.theme | NO | Background RGB only | -- |
```

Add a note: "Tip: Use `grep -rn '7B6CBD' .` to find all accent color occurrences across the repo (covers hex, rgb(), and rgba decimal formats)."

**Section 2: File Classification**

Table listing each file, its classification, and a brief description:

```markdown
## File Classification

| File | Classification | Description |
|------|---------------|-------------|
| colors.toml | Source of truth | Defines the 24-key color palette; read by Omarchy's template engine |
| btop.theme | Static override | System monitor theme with gradient mappings |
| hyprland.conf | Static override | Window manager borders, shadows, effects |
| hyprlock.conf | Static override | Lock screen color variables and overlay |
| mako.ini | Static override | Notification popup colors and urgency levels |
| waybar.css | Static override | Status bar GTK CSS overrides |
| walker.css | Static override | App launcher GTK CSS overrides |
| swayosd.css | Static override | Volume/brightness popup GTK CSS overrides |
| vscode.json | Static override | Editor workspace color customizations |
| neovim.lua | Static override | Terminal editor AMOLED background overrides |
| chromium.theme | Static override | Browser toolbar RGB triplet |
```

Add explanation: All files in this repo except colors.toml are static overrides. They contain hardcoded color values that must be manually updated when the palette changes. Omarchy's template engine generates configs for components where the theme does NOT ship a static override -- those generated files live at runtime in `~/.config/omarchy/current/theme/` and are not in this repo.

**Section 3: colors.toml Palette Reference**

List all 24 keys organized by category, with hex values. Use the table from 03-RESEARCH.md:

Categories:
- Base colors: background, foreground, cursor, accent
- Selection: selection_foreground, selection_background
- ANSI Normal (0-7): color0 through color7
- ANSI Bright (8-15): color8 through color15

**Section 4: Per-File Color Audit**

For each of the 10 static override files, list every hardcoded color value, its colors.toml mapping, and the config key/property it appears in. Group by file with a sub-heading for each. Include the count of values per file.

Example format per file:
```markdown
### btop.theme (33 values)

| Config Key | Value | colors.toml Key | Notes |
|-----------|-------|----------------|-------|
| theme[main_bg] | #000000 | background | |
| theme[main_fg] | #E8E0D0 | foreground | |
| theme[hi_fg] | #7B6CBD | accent | |
| theme[cpu_start] | #5AA8B5 | color6 | Cyan, gradient start |
| ... | ... | ... | ... |
```

For vscode.json, list the colorCustomizations keys.
For chromium.theme, note the format restriction (no comments allowed in file, annotated here only).

**Section 5: Unmapped Values**

List all color values that do NOT map to a colors.toml key:

```markdown
## Unmapped Values

| Value | File | Context | Rationale |
|-------|------|---------|-----------|
| #0a0a12 | neovim.lua | bg_float, bg_sidebar | Intentional tokyonight-specific dark surface; distinct from color0 (#111118) |
| #7B6CBD40 | vscode.json | selection.background | Derived: accent + 25% alpha |
| #7B6CBD30 | vscode.json | list.activeSelectionBackground | Derived: accent + 19% alpha |
| #000000FF | mako.ini | background-color | Format variant: background + FF alpha (mako requires #RRGGBBAA) |
| rgba(0,0,0,0.45) | hyprlock.conf | wallpaper dimming overlay | Derived: background + 45% opacity (design choice) |
| rgba(00000088) | hyprland.conf | shadow color | Derived: background + 53% alpha (shadow rendering) |
```

Note: "No new colors.toml keys are recommended. All unmapped values are either intentional design choices, derived values (base color + alpha modifier), or format variants."

**Derive actual data from the annotated config files** (read them from Plan 03-01's output). Do NOT copy research data blindly -- verify against actual file contents to ensure accuracy.

**Formatting:** Use standard GitHub-flavored Markdown. Keep tables aligned. No emojis.
  </action>
  <verify>
1. Verify COLORS.md exists at repo root: `ls COLORS.md`
2. Verify all 5 sections present: `grep -c "^##" COLORS.md` should be >= 5
3. Verify all 11 files mentioned: `grep -c "\.toml\|\.theme\|\.conf\|\.ini\|\.css\|\.json\|\.lua" COLORS.md` should be substantial
4. Verify quick reference table has all files: `grep -c "YES\|NO" COLORS.md` should be >= 11
5. Verify unmapped values section exists: `grep "Unmapped" COLORS.md`
6. Verify chromium.theme format restriction documented: `grep -i "chromium" COLORS.md`
  </verify>
  <done>
COLORS.md exists at repo root with five sections: quick reference (accent change guide with per-file instructions), file classification (all 11 files categorized), palette reference (all 24 colors.toml keys), per-file audit (every color value mapped), and unmapped values summary (all non-palette values documented with rationale). The document prominently answers "what to update when changing accent color" as its primary purpose.
  </done>
</task>

</tasks>

<verification>
1. `COLORS.md` exists at repo root and is accessible to users/contributors
2. Quick Reference section lists all 11 theme files with clear YES/NO for accent change impact
3. File Classification section correctly identifies colors.toml as "Source of truth" and all others as "Static override"
4. Palette Reference lists all 24 colors.toml keys with correct hex values
5. Per-File Audit covers all 10 static override files with every color value mapped
6. Unmapped Values section lists all 6 unmapped/derived values with rationale
7. Document does not contain stale or incorrect data vs actual file contents
</verification>

<success_criteria>
- COLORS.md at repo root is a complete, accurate reference for color traceability
- The "what to update" question is answered prominently in the first section, not buried
- Every file that needs manual accent-color updates has a clear callout
- All 24 palette keys documented with usage locations
- All unmapped values documented with rationale
- Document is practically useful for a maintainer performing an accent color change
</success_criteria>

<output>
After completion, create `.planning/phases/03-color-system-traceability/03-02-SUMMARY.md`
</output>
