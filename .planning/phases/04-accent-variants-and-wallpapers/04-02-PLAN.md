---
phase: 04-accent-variants-and-wallpapers
plan: 02
type: execute
wave: 2
depends_on:
  - 04-01
files_modified:
  - clawmarchy-variant
  - backgrounds/6-sakura-cherry-blossoms.png
  - backgrounds/7-ocean-midnight-harbor.png
  - backgrounds/8-tide-underwater-shrine.png
  - backgrounds/9-ember-lantern-festival.png
  - backgrounds/10-moss-forest-shrine.png
autonomous: false
requirements:
  - VAR-05
  - ASST-01
  - ASST-02

must_haves:
  truths:
    - "Users can switch between accent variants with a single command"
    - "Variant switching script validates input and lists available variants"
    - "Wallpaper collection contains at least 10 images in the backgrounds/ directory"
    - "New wallpapers are dark atmospheric anime scenes, not accent-saturated"
  artifacts:
    - path: "clawmarchy-variant"
      provides: "Shell script for switching accent variants"
      contains: "omarchy-theme-set"
    - path: "backgrounds/6-sakura-cherry-blossoms.png"
      provides: "Sakura variant paired wallpaper"
    - path: "backgrounds/7-ocean-midnight-harbor.png"
      provides: "Ocean variant paired wallpaper"
    - path: "backgrounds/8-tide-underwater-shrine.png"
      provides: "Tide variant paired wallpaper"
    - path: "backgrounds/9-ember-lantern-festival.png"
      provides: "Ember variant paired wallpaper"
    - path: "backgrounds/10-moss-forest-shrine.png"
      provides: "Moss variant paired wallpaper"
  key_links:
    - from: "clawmarchy-variant"
      to: "variants/*"
      via: "copies variant config files to theme root"
      pattern: "cp.*VARIANT_DIR.*SCRIPT_DIR"
    - from: "clawmarchy-variant"
      to: "omarchy-theme-set"
      via: "runs theme application after file copy"
      pattern: "omarchy-theme-set clawmarchy"
---

<objective>
Create the variant switching script and expand the wallpaper collection to 10+ images with dark atmospheric anime scenes paired to each accent variant.

Purpose: Users need a frictionless way to switch variants and a wallpaper collection that works aesthetically with any accent color. The switching script completes the variant installation story; the wallpapers complete the visual package.

Output: Executable `clawmarchy-variant` script, 5 new wallpapers in `backgrounds/`.
</objective>

<execution_context>
@/home/asem/.claude/get-shit-done/workflows/execute-plan.md
@/home/asem/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-accent-variants-and-wallpapers/04-RESEARCH.md
@.planning/phases/04-accent-variants-and-wallpapers/04-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create clawmarchy-variant switching script</name>
  <files>clawmarchy-variant</files>
  <action>
Create `clawmarchy-variant` as an executable shell script in the repo root. The script:

1. **Usage:** `clawmarchy-variant <name>` where name is one of: yoru, sakura, ocean, tide, ember, moss

2. **Path resolution:** Use `SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"` so the script works regardless of where it is called from (the theme is installed at `~/.config/omarchy/themes/clawmarchy/`).

3. **No arguments or `--list`:** Print available variants with descriptions and exit:
```
Available variants:
  yoru    - Muted blue-violet (default)
  sakura  - Cherry blossom pink
  ocean   - Deep sea blue
  tide    - Coastal teal
  ember   - Lantern warm orange
  moss    - Forest green

Usage: clawmarchy-variant <name>
```

4. **Invalid variant:** Print error and suggest `--list`, exit 1.

5. **Valid variant:**
   - Verify `variants/<name>/` directory exists
   - Copy all files from `variants/<name>/` to `$SCRIPT_DIR/` (overwrites root config files)
   - Print confirmation: `Switched to variant: <name>`
   - Automatically run `omarchy-theme-set clawmarchy` to apply the theme
   - Print: `Theme applied. Reload Waybar and reopen apps to see changes.`

6. **Set -euo pipefail** for safety.

7. **Make the file executable:** `chmod +x clawmarchy-variant`

NOTE: The yoru variant is NOT special-cased -- it has its own directory under `variants/yoru/` (created in Plan 04-01 as a restore point), so the script just copies from there like any other variant. This makes the system symmetric.
  </action>
  <verify>
    - `file clawmarchy-variant` shows "shell script" or similar
    - `test -x clawmarchy-variant` returns 0 (executable)
    - `bash clawmarchy-variant --list` exits 0 and lists all 6 variants
    - `bash clawmarchy-variant nonexistent` exits 1 with error message
    - `head -1 clawmarchy-variant` starts with `#!/bin/bash`
    - The script contains `set -euo pipefail`
    - The script contains `SCRIPT_DIR=` with dirname resolution
    - The script contains `cp` from variant dir to script dir
    - The script contains `omarchy-theme-set clawmarchy`
  </verify>
  <done>
    `clawmarchy-variant` exists at repo root, is executable, lists variants, validates input, copies variant files to root, and runs `omarchy-theme-set clawmarchy` to apply changes.
  </done>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Generate wallpapers using Gemini Pro</name>
  <files>
    backgrounds/6-sakura-cherry-blossoms.png
    backgrounds/7-ocean-midnight-harbor.png
    backgrounds/8-tide-underwater-shrine.png
    backgrounds/9-ember-lantern-festival.png
    backgrounds/10-moss-forest-shrine.png
  </files>
  <action>
Human action required: Generate 5 wallpapers using Gemini Pro (Nano Banana interface) with the prompts provided below. Claude cannot generate images -- the user must create these using their Gemini Pro subscription. Save each wallpaper as PNG to the backgrounds/ directory with the specified filename. After all 5 are saved, verify `ls backgrounds/ | wc -l` returns 10.
  </action>
  <verify>
    - `ls backgrounds/ | wc -l` returns 10
    - `file backgrounds/6-sakura-cherry-blossoms.png` shows PNG image data
    - `file backgrounds/7-ocean-midnight-harbor.png` shows PNG image data
    - `file backgrounds/8-tide-underwater-shrine.png` shows PNG image data
    - `file backgrounds/9-ember-lantern-festival.png` shows PNG image data
    - `file backgrounds/10-moss-forest-shrine.png` shows PNG image data
  </verify>
  <done>10 wallpapers exist in backgrounds/, all are valid PNG files, new wallpapers are dark atmospheric anime scenes paired to variant accent tones.</done>
  <what-built>The variant config files and switching script are complete. Now 5 wallpapers need to be generated using Gemini Pro to bring the collection from 5 to 10.</what-built>
  <how-to-verify>
Generate each wallpaper using the prompts below in Gemini Pro (Nano Banana interface). For each wallpaper:

1. Use the prompt exactly as provided (or adjust slightly if Gemini needs refinement)
2. Verify the output: 70-80% dark tones, anime art style, no text/watermarks, accent color is subtle not dominant
3. Download at highest available resolution (target 3840x2160)
4. If Gemini outputs lower than 4K, the image is still acceptable -- Omarchy scales wallpapers
5. Save to `backgrounds/` with the specified filename

**Wallpaper 6 -- Sakura (pink):** `6-sakura-cherry-blossoms.png`
```
Generate a dark atmospheric anime illustration, 16:9 aspect ratio, highest resolution available.

Scene: A moonlit Japanese garden at night with cherry blossom trees. Petals drift through the air. A stone lantern glows softly. A traditional wooden bridge crosses a dark reflective pond.

Style: Dark atmospheric anime art, desktop wallpaper aesthetic. 70-80% deep blacks and very dark tones. Subtle pink and soft rose tones only in cherry blossoms and lantern glow. No text, no UI elements, no watermarks. Cinematic depth, detailed anime quality.
```

**Wallpaper 7 -- Ocean (blue):** `7-ocean-midnight-harbor.png`
```
Generate a dark atmospheric anime illustration, 16:9 aspect ratio, highest resolution available.

Scene: A quiet harbor town at midnight viewed from a cliff. Fishing boats rest on dark water reflecting starlight. Distant lighthouse beam cuts through sea mist. Moonlight illuminates waves.

Style: Dark atmospheric anime art, desktop wallpaper aesthetic. 70-80% deep blacks and very dark tones. Subtle deep blue and steel blue tones in water reflections and moonlight. No text, no UI elements, no watermarks. Cinematic composition with depth.
```

**Wallpaper 8 -- Tide (teal):** `8-tide-underwater-shrine.png`
```
Generate a dark atmospheric anime illustration, 16:9 aspect ratio, highest resolution available.

Scene: A partially submerged ancient shrine visible through dark ocean water. Bioluminescent sea life provides subtle teal-cyan light. Coral formations and swaying kelp surround the structure. Light filtering down from distant surface.

Style: Dark atmospheric anime art, desktop wallpaper aesthetic. 70-80% deep blacks and very dark ocean tones. Subtle teal and aqua tones in bioluminescence and water light. No text, no UI elements, no watermarks. Mysterious atmosphere with depth.
```

**Wallpaper 9 -- Ember (orange):** `9-ember-lantern-festival.png`
```
Generate a dark atmospheric anime illustration, 16:9 aspect ratio, highest resolution available.

Scene: A narrow traditional Japanese alleyway during a lantern festival at night. Paper lanterns with warm amber glow line the path. A lone figure in traditional clothing walks away from viewer. Steam rises from a ramen stall.

Style: Dark atmospheric anime art, desktop wallpaper aesthetic. 70-80% deep blacks and dark shadows. Warm orange and amber tones only in lantern glow and steam highlights. No text, no UI elements, no watermarks. Cinematic atmosphere with bokeh-like depth.
```

**Wallpaper 10 -- Moss (green):** `10-moss-forest-shrine.png`
```
Generate a dark atmospheric anime illustration, 16:9 aspect ratio, highest resolution available.

Scene: A moss-covered stone stairway leading to a small forest shrine at dusk. Ancient trees with thick trunks form a canopy. Fireflies provide subtle green-gold light. Moss and ferns cover every surface.

Style: Dark atmospheric anime art, desktop wallpaper aesthetic. 70-80% deep blacks and very dark forest tones. Subtle muted green and forest tones in moss, ferns, and firefly light. No text, no UI elements, no watermarks. Mysterious atmosphere with depth and detail.
```

**Quality checklist per wallpaper:**
- [ ] Background areas are close to black (not gray or mid-tone)
- [ ] Accent color is present but subtle (20-30% of visual area, not dominant)
- [ ] Anime art style consistent with existing 5 wallpapers
- [ ] No text, watermarks, or AI generation artifacts
- [ ] Saved as PNG in `backgrounds/` with correct filename

After all 5 wallpapers are saved, verify: `ls backgrounds/ | wc -l` should return 10.
  </how-to-verify>
  <resume-signal>Type "wallpapers done" when all 5 wallpapers are generated and saved to backgrounds/</resume-signal>
</task>

</tasks>

<verification>
1. `clawmarchy-variant --list` prints all 6 variant names with descriptions
2. `clawmarchy-variant nonexistent` exits 1 with helpful error
3. `ls backgrounds/ | wc -l` returns 10
4. All wallpaper files are PNG images (not zero-byte or corrupt)
5. `file backgrounds/6-sakura-cherry-blossoms.png` shows PNG image data
</verification>

<success_criteria>
- `clawmarchy-variant` script is executable and works for all 6 variants
- 10 wallpapers exist in `backgrounds/` directory
- New wallpapers are dark atmospheric anime scenes
- Full variant workflow works: `clawmarchy-variant sakura` copies files and applies theme
</success_criteria>

<output>
After completion, create `.planning/phases/04-accent-variants-and-wallpapers/04-02-SUMMARY.md`
</output>
